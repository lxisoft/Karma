<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<title>Home</title>
	<!-- Font Awesome -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
	<!-- Bootstrap core CSS -->
	<link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css" rel="stylesheet">
	<!-- Material Design Bootstrap -->
	<link href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.5.11/css/mdb.min.css" rel="stylesheet">
</head>

<body>
	<nav class="navbar fixed-top navbar-expand-lg navbar-dark info-color scrolling-navbar">
		<a class="navbar-brand" th:href="@{/home/approved}"><strong>Karma</strong></a>
		<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
		 aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>
		<div class="collapse navbar-collapse" id="navbarSupportedContent">
			<ul class="navbar-nav mr-auto">
				<li class="nav-item active"><a class="nav-link" th:href="@{/home/approved}">Home
						<span class="sr-only">(current)</span>
					</a></li>
				<li class="nav-item"><a class="nav-link" th:href="@{/categories}">I need help</a></li>
				<li class="nav-item"><a class="nav-link" th:href="@{/home/pending}">Pending help requests</a></li>
				<li class="nav-item"><a class="nav-link" th:href="@{/helps/completed}">Helps</a></li>
				<li class="nav-item"><a class="nav-link" th:href="@{/helps/incompleted}">Incomplete
						helps</a></li>
			</ul>
			<ul class="navbar-nav nav-flex-icons">
				<li class="nav-item"><a class="nav-link"><i class="fa fa-facebook"></i></a></li>
				<li class="nav-item"><a class="nav-link"><i class="fa fa-twitter"></i></a></li>
				<li class="nav-item"><a class="nav-link"><i class="fa fa-instagram"></i></a></li>
			</ul>
		</div>
	</nav>

	<!-- Material form login -->
	<!-- Default form login -->
	<div class="container-fluid">
		<!--<div class="row mx-auto mt-5">
			<div class="col-sm-8"></div>
			<a th:href="@{/categories}" class="btn btn-info">I need help</a> <a
				th:href="@{/home/pending}" class="btn btn-info">See pending help requests</a>
		</div>-->
		<div class="row mt-5"></div>
		<div class="row mt-5">
			<!-- 			<div class="col-sm-8">
				<div th:each="need : ${needs}" class="row my-3">
					<div class="card border-info mb-3 mx-auto"
						style="width: 75%">
						<div th:text="'posted on '+${need.date}" class="card-header"></div>
						<div class="card-body text-info">
							<h5 class="card-title">Need help</h5>
							<p class="card-text" th:text="${need.description}">Some quick
								example text to build on the card title and make up the bulk of
								the card's content.</p>
							<p th:if="${need.beneficiaryType != 'you'}">help is for
								someone else</p>
							<div>
							</div>
						</div>
					</div>
				</div>
			</div> -->
			<div class="col-sm-8 mx-auto">
				<div th:each="need : ${needs}" class="row my-4">
					<div class="card" style="width:70%">
						<div class="card-body">
							<form th:action="@{/user-checks/markingGenuinenes}" th:id="'usercheck'+${need.id}">
								<input type="hidden" name="id" th:value="${need.id}" id="'genuine'+${need.id}">
								<input type="hidden" name="postedUser" th:value="${need.postedUserId}">
								<input type="hidden" name="isGenuine" value="true">
								</form>
								<!--<i class="fa fa-ellipsis-v" aria-hidden="true">-->
									<div class="dropleft float-right">
											<button type="button" style="border-width:0px!important;outline:0px;box-shadow:0px!important;" class="btn-white" data-toggle="dropdown" aria-haspopup="true"
											aria-expanded="false">
										<i class="fa fa-ellipsis-v"></i>
										  <span class="sr-only">Toggle Dropdown</span>
									</button>
										<div class="dropdown-menu">
										  <a class="dropdown-item" th:onclick="|markGenuine(${need.id})|">Mark as genuine</a>
										  <div class="dropdown-divider"></div>	
										  <a class="dropdown-item" th:onclick="|markfake(${need.id})|">Mark as fake</a>
											<div class="dropdown-divider"></div>
										  <a class="dropdown-item">Help later</a>
										</div>
									  </div>
								<!--</i>-->
							<h4 class="card-title text-info">Need help</h4>
							<h5 class="card-title text-info" th:unless="${#lists.isEmpty(need.categories)}" th:text="'category: '+${need.categories[0].name}+'-'+${need.categories[0].subCategory}">Need
								help</h5>
							<h6 class="card-subtitle mb-2 text-muted" th:text="'posted on '+${need.date}">Panel subtitle</h6>
								<!-- Grid row -->
						<div class="row">

							<!-- Grid column -->
							<div class="col-md-12 mb-3">

								<img src="https://mdbootstrap.com/img/Photos/Slides/img%20(137).jpg" class="img-fluid z-depth-1" alt="Responsive image">

							</div>
							<!-- Grid column -->

						</div>
						<!-- Grid row -->

						<!-- Grid row -->
						<div class="row">

							<!-- Grid column -->
							<div class="col-lg-4 col-md-12 mb-3">

								<img src="https://mdbootstrap.com/img/Photos/Horizontal/Nature/6-col/img(115).jpg" class="img-fluid z-depth-1"
								 alt="Responsive image">

							</div>
							<!-- Grid column -->

							<!-- Grid column -->
							<div class="col-lg-4 col-md-6 mb-3">

								<img src="https://mdbootstrap.com/img/Photos/Horizontal/Nature/6-col/img(116).jpg" class="img-fluid z-depth-1"
								 alt="Responsive image">

							</div>
							<!-- Grid column -->

							<!-- Grid column -->
							<div class="col-lg-4 col-md-6 mb-3">

								<img src="https://mdbootstrap.com/img/Photos/Horizontal/Nature/6-col/img(117).jpg" class="img-fluid z-depth-1"
								 alt="Responsive image">

							</div>
							<!-- Grid column -->

						</div>
						<!-- Grid row -->

						<!-- Grid row -->
						<div class="row">

							<!-- Grid column -->
							<div class="col-md-6 mb-3">

								<img src="https://mdbootstrap.com/img/Photos/Horizontal/People/6-col/img(117).jpg" class="img-fluid z-depth-1"
								 alt="Responsive image">

							</div>
							<!-- Grid column -->

							<!-- Grid column -->
							<div class="col-md-6 mb-3">

								<img src="https://mdbootstrap.com/img/Photos/Horizontal/People/6-col/img(129).jpg" class="img-fluid z-depth-1"
								 alt="Responsive image">

							</div>
							<!-- Grid column -->

						</div>
						<!-- Grid row -->
							<p class="card-text mt-3" th:text="${need.description}">Some quick example text to build on the
								panel title and make up the bulk of the panel's content.</p>
							<p>
								<a th:href="@{'/needs/'+${need.id}}" class="card-link">Click for more</a> <a th:href="@{'/help-need/'+${need.id}}"
								 class="card-link text-success">Help now</a>
						</div>
						
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- SCRIPTS -->
	<!-- JQuery -->
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<!-- Bootstrap tooltips -->
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.4/umd/popper.min.js"></script>
	<!-- Bootstrap core JavaScript -->
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/js/bootstrap.min.js"></script>
	<!-- MDB core JavaScript -->
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.5.11/js/mdb.min.js"></script>
	<script>
		function markGenuine(needId) {
			document.getElementById("usercheck"+needId).submit();
		} 
		function markFake(needId) {
			document.getElementById("genuine"+needId).value="false";
			document.getElementById("usercheck"+needId).submit();
		} 
	</script>
</body>

</html>